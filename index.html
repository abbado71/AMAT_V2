<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="apple-touch-icon" href="https://abbado71.github.io/AMAT-webapp/apple-touch-icon_1.png">
  <title>AMAT Web App</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      height: 100vh;
      width: 100vw;
      overflow: hidden;
      display: flex;
      justify-content: center;
      align-items: center;
      background: white;
      font-family: monospace;
    }

    #pagina-iniziale, #pagina-biglietto, #pagina-ticket {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      background: white;
    }

    #pagina-biglietto, #pagina-ticket { display: none; }

    #pagina-iniziale img,
    #pagina-biglietto img,
    #pagina-ticket img {
      width: 100%;
      height: 100%;
      cursor: pointer;
    }

    /* Overlay per l’orologio */
    #ora-reale {
      position: absolute;
      bottom: 11%;
      left: 17%;
      font-size: 1.0em;
      color: rgba(33,54,111,0.8);
      background: rgba(210,213,228,0);
      padding: 5px 10px;
      border-radius: 10px;
    }
  </style>
</head>
<body>

  <!-- SCHERMATA INIZIALE -->
  <div id="pagina-iniziale">
    <img 
      src="images/Biglietti.jpg" 
      alt="Schermata iniziale"
      onclick="gestisciClick(event)"
    >
  </div>

  <!-- SCHERMATA BIGLIETTO -->
  <div id="pagina-biglietto">
    <img id="immagine-biglietto" src="" alt="Biglietto attivo">
  </div>

  <!-- SCHERMATA TICKET ATTIVO -->
  <div id="pagina-ticket">
    <img id="immagine-ticket" src="images/TicketAttivo.jpg" alt="Ticket attivo">
    <div id="ora-reale"></div>
  </div>

  <script>
    let bigliettoCorrente = null;

    // Gestione click sulla schermata iniziale
    function gestisciClick(event) {
      const img = event.target;
      const rect = img.getBoundingClientRect();
      const clickX = event.clientX - rect.left;
      const clickY = event.clientY - rect.top;
      const imgWidth = rect.width;
      const imgHeight = rect.height;

      let urlBiglietto = null;

      // Primo tasto
      const tasto1 = {
        xMin: imgWidth * 0.1,
        xMax: imgWidth * 0.5,
        yMin: imgHeight * 0.5,
        yMax: imgHeight * 0.6
      };

      // Secondo tasto
      const tasto2 = {
        xMin: imgWidth * 0.1,
        xMax: imgWidth * 0.5,
        yMin: imgHeight * 0.7,
        yMax: imgHeight * 0.8
      };

      if (clickX >= tasto1.xMin && clickX <= tasto1.xMax &&
          clickY >= tasto1.yMin && clickY <= tasto1.yMax) {
        urlBiglietto = "images/BigliettoAttivo90MIN.jpg";
      }

      if (clickX >= tasto2.xMin && clickX <= tasto2.xMax &&
          clickY >= tasto2.yMin && clickY <= tasto2.yMax) {
        urlBiglietto = "images/BigliettoAttivo80MIN.jpg";
      }

      if (urlBiglietto) {
        mostraBiglietto(urlBiglietto);
      }
    }

    // Mostra il biglietto selezionato
    function mostraBiglietto(url) {
      bigliettoCorrente = url; // salva quale biglietto era aperto
      const imgBiglietto = document.getElementById("immagine-biglietto");
      imgBiglietto.src = url;
      document.getElementById("pagina-iniziale").style.display = "none";
      document.getElementById("pagina-biglietto").style.display = "flex";
    }

    // Torna alla home
    function tornaAllaHome() {
      document.getElementById("pagina-biglietto").style.display = "none";
      document.getElementById("pagina-iniziale").style.display = "flex";
    }

    // Clic sul biglietto:
    // - in alto a destra ? apre TicketAttivo
    // - in basso al centro ? torna alla home
    document.getElementById("immagine-biglietto").addEventListener("click", function(event) {
      const img = event.target;
      const rect = img.getBoundingClientRect();
      const clickX = event.clientX - rect.left;
      const clickY = event.clientY - rect.top;
      const imgWidth = rect.width;
      const imgHeight = rect.height;

      // Zona cliccabile per APRIRE TicketAttivo (angolo in alto a destra)
      const zonaTicket = {
        xMin: imgWidth * 0.8,
        xMax: imgWidth,
        yMin: 0,
        yMax: imgHeight * 0.2
      };

      // Zona cliccabile per TORNARE ALLA HOME (basso al centro)
      const zonaHome = {
        xMin: imgWidth * 0.47,
        xMax: imgWidth * 0.53,
        yMin: imgHeight * 0.9,
        yMax: imgHeight
      };

      if (clickX >= zonaTicket.xMin && clickX <= zonaTicket.xMax &&
          clickY >= zonaTicket.yMin && clickY <= zonaTicket.yMax) {
        mostraTicketAttivo();
        return;
      }

      if (clickX >= zonaHome.xMin && clickX <= zonaHome.xMax &&
          clickY >= zonaHome.yMin && clickY <= zonaHome.yMax) {
        tornaAllaHome();
        return;
      }

      console.log("Click ignorato (fuori da zone cliccabili)");
    });

    // Mostra la pagina TicketAttivo
    function mostraTicketAttivo() {
      document.getElementById("pagina-biglietto").style.display = "none";
      document.getElementById("pagina-ticket").style.display = "flex";
      aggiornaOraReale();
    }

    // Aggiorna l’ora reale ogni secondo
    function aggiornaOraReale() {
      const oraDiv = document.getElementById("ora-reale");
      function aggiorna() {
        const ora = new Date();
        const hh = String(ora.getHours()).padStart(2, '0');
        const mm = String(ora.getMinutes()).padStart(2, '0');
        const ss = String(ora.getSeconds()).padStart(2, '0');
        oraDiv.textContent = `${hh}:${mm}:${ss}`;
      }
      aggiorna();
      clearInterval(window.timerOra);
      window.timerOra = setInterval(aggiorna, 1000);
    }

    // Click su TicketAttivo ? torna al biglietto da cui proveniva
    document.getElementById("immagine-ticket").addEventListener("click", function(event) {
      const img = event.target;
      const rect = img.getBoundingClientRect();
      const clickX = event.clientX - rect.left;
      const clickY = event.clientY - rect.top;

      // Zona cliccabile: angolo in alto a sinistra
      if (clickX < rect.width * 0.3 && clickY < rect.height * 0.3) {
        document.getElementById("pagina-ticket").style.display = "none";
        document.getElementById("pagina-biglietto").style.display = "flex";
        clearInterval(window.timerOra);
      }
    });
  </script>
</body>
</html>



